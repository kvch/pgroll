{
  "name": "44_add_foreign_key_table_reference_constraint",
  "operations": [
    {
      "create_constraint": {
        "type": "foreign_key",
        "table": "tickets",
        "name": "fk_sellers",
        "columns": ["sellers_name", "sellers_name"],
        "references": {
            "table": "sellers",
            "name": "fk_sellers",
            "column": "name",
            "on_delete": "CASCADE"
        },
        "up": "(SELECT CASE WHEN EXISTS (SELECT 1 FROM sellers WHERE sellers.name = sellers_name) THEN sellers_name ELSE NULL END)",
        "down": "sellers_name"
      }
    }
  ]
}
